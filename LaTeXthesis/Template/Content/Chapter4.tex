\chapter{Algorithms}
\label{ch:algorithms}



\section{Intuition}
\label{sec:intuition}

To solve this problem we have to evaluate all possible edge combinations. Even for greedy heuristics we need to limit the edge candidates. The algorithm considers nodes with a high expressed value. According to our model the smallest decrease is happening when we connect a value near zero and a relatively high value.
\\
\\
We will now see why this statement holds by examining how the expressed opinion changes with an addition in the Friedkin and Johnsen model. Consider an arbitrary example with two nodes inside a network. Node $a$ has $z_a = -0.02$ and node $b$ has $z_b = 0.5$. Also for this example we assume that $w_{ii}=w_{ij}=w_{ji}=1$. 
\\
\\
If we connect these two nodes with an edge and re calculate the expressed opinions both of the $z_i$ denominators will be increased by one. This emerges from the fact that both nodes will have an additional neighbour and that all weights equal with one. The numerator of the one node $a$ will be increased by a lot and the numerator of the node $b$ will be decreased by a small value.
\\
\\
The new $z_a$ will not change a lot because the big addition in the numerator will approach the +1 addition of the denominator. On the other hand the new $z_b$ will see a big change as the numerator had a small decrease thus creating a big decrease overall for this node. We can clearly see that only one of the two nodes will amount to a big decrease. 
\\
\\
Now consider a second example of two nodes node $c$ has $z_c = -0.8$ and node $d$ has $z_d = 0.9$. After the addition node $d$ will see a big decrease because we add two conflicting values that almost neutralise each other on the numerator but the addition of the +1 on the denominator stands still. On the other hand node $c$ will also see a big decrease for the same reason. With this type of connection both of the nodes have a significant decrease.
\\




\clearpage

\section{Heuristics}
\label{sec:heuristics}

In this section we  consider some heuristic algorithms for minimising $\pi(z)$. All the heuristics use the intuition that connecting the most extreme opinions of each community draw both of them into neutrality. The algorithms use two lists. One for each viewpoint sorted according to their opinion value. The naive Algorithm ~\ref{alg:naiveAlgo} stops when the first $k$ edges are found.

\vspace{10pt}

\begin{algorithm}[htbp]
	\caption{Naive minimization of $\pi(z)$}
	\label{alg:naiveAlgo}
	\begin{flushleft}
        		\textbf{INPUTS:} Graph $G$; $k$ number of edges to add;
		$X$, $Y $, the set of vertices of each viewpoint $\epsilon$ [-1,0] and [0,1] respectively.\\
		\vspace{6pt}
        		\textbf{OUTPUT:} List of $k$ edges that minimize the polarization index $\pi(z)$
	\end{flushleft}
	\begin{algorithmic}[1]
		\STATE $EdgesToAdd \leftarrow Empty List;$
		\FOR {$i = 1:n \ $}
		\STATE $Vertex \ u = X[i]$
		\FOR {$j= 1:n \ $}
		\STATE $Vertex \ v = Y[i]$
		\IF {edge$(u,v)$ does not exist in the graph}
			\STATE Compute $\pi(z)$, the decrease if the edge $(u,v)$ is added;
			\STATE Append edge $(u,v)$ to EdgesToAdd;
		\ENDIF
		\ENDFOR
		\ENDFOR
		\STATE $Sorted \leftarrow sort(EdgesToAdd)$ by the decrease of $\pi(z)$ by decreasing order;
		\STATE Return top $k$ from $Sorted$
	\end{algorithmic}
\end{algorithm}

An improvement can be done by using the $\pi(z)$ as a condition to continue. A list of $\pi(z)$ will be created with a traversal. This list will contain the polarization of each node of one of the viewpoints after adding an edge between him and the most extreme of the other.
This list can be used to break the second loop and reduce the number of computations and can be seen in ~\ref{alg:GreedyAlgo}. Even though the worst complexity is the same with ~\ref{alg:naiveAlgo} it will not reach them in an average case.

\begin{algorithm}[htbp]
	\caption{Greedy minimization of $\pi(z)$}
	\label{alg:GreedyAlgo}
	\begin{flushleft}
        		\textbf{INPUTS:} Graph $G$; $k$ number of edges to add; Number of nodes $n$;
		$X$, $Y $, the sorted set of vertices according to polarization index of each viewpoint $\epsilon$ [-1,0] and [0,1] respectively.\\
		\vspace{6pt}
        		\textbf{OUTPUT:} List of $k$ edges that minimize the polarization index $\pi(z)$
	\end{flushleft}
	\begin{algorithmic}[1]
		\STATE $EdgesToAdd \leftarrow Empty List;$
		\STATE $PolarizationFirstPass \leftarrow Empty List;$
		\STATE $Vertex \ u = X[0]$
		\FOR {$i = 1:n \ $}
		\STATE $Vertex \ v = Y[i]$
		\STATE Add edge $(u,v)$ and compute $\pi(z)$;
		\STATE Append the result to $PolarizationFirstPass$;
		\STATE Remove the edge $(u,v)$ from the graph to stay as previous;
		\ENDFOR
		
		\FOR{$i= 1:n\ $}
		\STATE $Vertex \ u = X[i]$
		\FOR {$j= 1:n \ $}
		\STATE $Vertex \ v = Y[i]$
		\STATE Compute $\pi(z)$, the decrease if the edge $(u,v)$ is added;
		\IF {$i \neq k$}
			\IF  {$\pi(z) > PolarizationFirstPass[i+1] $}
				\STATE break;
			\ENDIF
		\ENDIF
		\STATE Append edge $(u,v)$ to EdgesToAdd;
		\IF  {$SizeOf(EdgesToAdd) = k$}
			\STATE return EdgesToAdd;
		\ENDIF
		\ENDFOR
		\ENDFOR
	\end{algorithmic}
\end{algorithm}
\clearpage

We can improve further Algorithm ~\ref{alg:GreedyAlgo} by removing the need for the first pass. Instead the $\pi(z)$ a function of distance can be used as condition to continue. The same holds for the complexity with ~\ref{alg:GreedyAlgo}.


\begin{algorithm}[htbp]
	\caption{Distance minimization of $\pi(z)$}
	\label{alg:DisAlgo}
	\begin{flushleft}
        		\textbf{INPUTS:} Graph $G$; $k$ number of edges to add; Number of nodes $n$;
		$X$, $Y $, the sorted set of vertices according to polarization index of each viewpoint $\epsilon$ [-1,0] and [0,1] respectively.\\
		\vspace{6pt}
        		\textbf{OUTPUT:} List of $k$ edges that minimize the polarization index $\pi(z)$
	\end{flushleft}
	\begin{algorithmic}[1]
		\STATE $EdgesToAdd \leftarrow Empty List;$
		\FOR{$i= 1:n\ $}
		\STATE $Vertex \ u = X[i]$
		\FOR {$j= 1:n \ $}
		\STATE $Vertex \ v = Y[i]$
		\IF {$i \neq k$}
			\IF {$Abs(v)+Abs(u) \leqslant Abs(X[i+1]) + Abs(Y[0])$}
				\STATE continue;
			\ENDIF
		\ENDIF
		\STATE Compute $\pi(z)$, the decrease if the edge $(u,v)$ is added;
		\STATE Append edge $(u,v)$ to EdgesToAdd;
		\IF  {$SizeOf(EdgesToAdd) = k$}
			\STATE return EdgesToAdd;
		\ENDIF
		\ENDFOR
		\ENDFOR
	\end{algorithmic}
\end{algorithm}

\clearpage


